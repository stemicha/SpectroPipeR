<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="a set of R functions that facilitate a comprehensive, fully automated, and standardized data analysis of Spectronaut DIA-MS data. This includes ID rate summary, ON/OFF analysis, normalization, batch or covariate adjustment,iBAQ and maxLFQ quantification, multivariate analysis, peptide-centric statistical analysis (ROPECA or modified t-test), and interactive HTML report generation. The output is presented through a variety of clear graphs and tables in a well-structured folder system. The comprehensive standalone HTML report is extremely useful for existing Electronic Laboratory Notebooks (ELN) or Laboratory Information Management Systems (LIMS) to quickly obtain a project-specific overview.">
<title>R pipeline for the downstream analysis of Spectronaut DIA-MS data • SpectroPipeR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="R pipeline for the downstream analysis of Spectronaut DIA-MS data">
<meta property="og:description" content="a set of R functions that facilitate a comprehensive, fully automated, and standardized data analysis of Spectronaut DIA-MS data. This includes ID rate summary, ON/OFF analysis, normalization, batch or covariate adjustment,iBAQ and maxLFQ quantification, multivariate analysis, peptide-centric statistical analysis (ROPECA or modified t-test), and interactive HTML report generation. The output is presented through a variety of clear graphs and tables in a well-structured folder system. The comprehensive standalone HTML report is extremely useful for existing Electronic Laboratory Notebooks (ELN) or Laboratory Information Management Systems (LIMS) to quickly obtain a project-specific overview.">
<meta property="og:image" content="https://stemicha.github.io/SpectroPipeR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">SpectroPipeR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/a01_SpectroPipeR_read_Spectronaut_data.html">SpectroPipeR - step 1 - read Spectronaut data</a>
    <a class="dropdown-item" href="articles/a02_SpectroPipeR_norm_quant.html">SpectroPipeR - step 2 - normalization and quantification</a>
    <a class="dropdown-item" href="articles/a03_SpectroPipeR_MVA_analysis.html">SpectroPipeR - step 3 -  MVA analysis</a>
    <a class="dropdown-item" href="articles/a04_SpectroPipeR_statistics.html">SpectroPipeR - step 4 - statistics</a>
    <a class="dropdown-item" href="articles/a05_SpectroPipeR_reporting.html">SpectroPipeR - step 5 - reporting</a>
    <a class="dropdown-item" href="articles/a06_SpectroPipeR_XIC_plot.html">SpectroPipeR - additional feature - XIC plotting module</a>
    <a class="dropdown-item" href="articles/a07_Gprofiler2_code_suggestion.html">SpectroPipeR - example code - functional enrichment analysis (external package)</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="spectropiper-">SpectroPipeR <a class="anchor" aria-label="anchor" href="#spectropiper-"></a>
</h1>
</div>
<p>a streamlining post Spectronaut™ DIA-MS data analysis R package</p>
<p>The manual can be found under <a href="https://stemicha.github.io/SpectroPipeR/" class="uri">https://stemicha.github.io/SpectroPipeR/</a></p>
<!-- badges: start -->
<!-- badges: end -->
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>During proteome studies, researchers frequently face various challenges, some of which can be mitigated while others cannot. A prevalent issue is the bottleneck in downstream data analysis, which arises due to a limited number of bioinformaticians, rapid generation of raw data, and variations in data analysis methods or workflows.</p>
<p>To tackle this problem SpectroPipeR was developed. This pipeline is designed to simplify data analysis tasks, significantly reduce the workload for scientists, be easily expandable, user-friendly even for those with minimal bioinformatics knowledge, generate standardized analysis, outputs, and reports for each project, and produce publication-ready tables, figures, and reports.</p>
<p>SpectroPipeR comprises a set of R functions that facilitate a comprehensive, fully automated, and standardized data analysis of Spectronaut DIA-MS data. This includes ID rate summary, ON/OFF analysis, normalization, batch or covariate adjustment, iBAQ and maxLFQ quantification, multivariate analysis, peptide-centric statistical analysis (ROPECA or modified t-test), and interactive HTML report generation. The output is presented through a variety of clear graphs and tables in a well-structured folder system. The comprehensive standalone HTML report is extremely useful for existing Electronic Laboratory Notebooks (ELN) or Laboratory Information Management Systems (LIMS) to quickly obtain a project-specific overview.</p>
<p>SpectroPipeR consists of a global parameter setting and four analysis modules and one reporting module that are executed sequentially. This modular approach allows flexibility where specific analyses like ID- and intensity plots can be run independently or as part of the complete pipeline.</p>
<p>After each module execution, dynamic console feedback is provided and written to a log file to help identify errors early on. Upon completion of all modules, a comprehensive set of tables and plots categorized in different folders is generated to summarize the project from various perspectives.</p>
<p>SpectroPipeR includes also a module for XIC plotting, capable of generating protein-specific XIC plots for each ion associated with the protein. This is complemented by a range of significant metrics designed to aid in evaluating the accuracy of both identification and quantification.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of SpectroPipeR like so:</p>
<ul>
<li>install R using <a href="https://cran.r-project.org" class="external-link uri">https://cran.r-project.org</a>.</li>
<li>
<u>optional:</u> install RStudio IDE using <a href="https://posit.co/download/rstudio-desktop/" class="external-link uri">https://posit.co/download/rstudio-desktop/</a>
</li>
<li>inside R execute the following code:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install devtools</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="co"># install SpectroPipeR from github</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"stemicha/SpectroPipeR"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># quit and restart R or restart R session in Rstudio</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="requirements">Requirements<a class="anchor" aria-label="anchor" href="#requirements"></a>
</h2>
<p>For the interactive html report feature SpectroPipeR needs <strong>Quarto CLI</strong>. Quarto is an open-source scientific and technical publishing system. You can install the Quarto CLI using <a href="https://quarto.org/docs/get-started/" class="external-link">Quarto get started installation</a>.</p>
</div>
<div class="section level2">
<h2 id="spectronaut-report-requirements">Spectronaut report requirements<a class="anchor" aria-label="anchor" href="#spectronaut-report-requirements"></a>
</h2>
<p>SpectroPipeR requires certain columns from the Spectronaut output report that are not included by default.</p>
<p><em>The following steps are advised:</em></p>
<ol style="list-style-type: decimal">
<li><strong>download and installation of SpectroPipeR (if not already be done)</strong></li>
<li><strong>load the SpectroPipeR package and utilize the <code><a href="reference/Spectronaut_export_scheme.html">Spectronaut_export_scheme()</a></code> function to create the necessary Spectronaut report scheme (SpectroPipeR_report.rs) in the output folder provided.</strong></li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># output_location: path to output folder for the SpectroPipeR_report.rs Spectronaut report scheme</span></span>
<span><span class="fu"><a href="reference/Spectronaut_export_scheme.html">Spectronaut_export_scheme</a></span><span class="op">(</span>output_location <span class="op">=</span> <span class="st">"../SpectroPipeR_test_folder"</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li><strong>import the generated SpectroPipeR report scheme (SpectroPipeR_report.rs) into Spectronaut</strong></li>
<li><strong>conduct an analysis of your raw mass spectrometry data in Spectronaut and define conditions during analysis setup process</strong></li>
<li>**produce the output report (*.tsv) using the imported SpectroPipeR report scheme**</li>
<li><strong>open R and use/edit code below to perform your analysis</strong></li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stemicha.github.io/SpectroPipeR/">SpectroPipeR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># edit strings inside quotes</span></span>
<span></span>
<span><span class="co"># use/edit default parameters list // define output folder (mandatory !)</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>output_folder <span class="op">=</span> <span class="st">"[your path to output folder]"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add your path to your Spectronaut report (*.tsv)</span></span>
<span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="st">"[your path to Spectronaut report (*.tsv)]"</span></span>
<span></span>
<span><span class="co"># add your condition comparisons as named in Spectronaut analysis setup</span></span>
<span><span class="va">condition_comp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"[condition_2]"</span>,<span class="st">"[condition_1]"</span><span class="op">)</span>,</span>
<span>                       <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"[condition_3]"</span>,<span class="st">"[condition_1]"</span><span class="op">)</span></span>
<span>                        <span class="op">)</span></span>
<span></span>
<span><span class="co"># launch analysis</span></span>
<span><span class="va">SpectroPipeR_analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/SpectroPipeR.html">SpectroPipeR</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">file_path</span>,</span>
<span>                                      parameter <span class="op">=</span> <span class="va">params</span>,</span>
<span>                                      condition_comparisons <span class="op">=</span> <span class="va">condition_comp</span></span>
<span>                                      <span class="op">)</span></span></code></pre></div>
<p>Spectronaut output report should contain the following columns to work in SpectroPipeR (these are included when using the scheme generated by <code><a href="reference/Spectronaut_export_scheme.html">Spectronaut_export_scheme()</a></code>):</p>
<p><u>mandatory Spectronaut report columns:</u></p>
<p>R.FileName, R.Condition, R.Replicate, R.Instrument Name, R.Raw File Name, R.MS1 Mass Analyzer, R.MS2 Mass Analyzer, R.Run Date, PG.ProteinGroups, PG.Organisms, PG.IBAQ, PEP.StrippedSequence, EG.ModifiedPeptide, PEP.NrOfMissedCleavages, EG.UserGroup, EG.Qvalue, EG.PEP, EG.Cscore, EG.NormalizationFactor, EG.TotalQuantity (Settings), EG.SignalToNoise, EG.Identified, EG.ApexRT, EG.IntCorrScore, EG.DatapointsPerPeak, EG.DatapointsPerPeak (MS1), FG.Charge, FG.Id, FG.XICDBID, FG.LabeledSequence, FG.ShapeQualityScore, FG.MS1Quantity, FG.MS2Quantity, FG.MS1RawQuantity, FG.MS2RawQuantity</p>
<p>EG.TotalQuantity (Settings) is used for the quantification. Per default MS2 level should be selected in the quantification setting in Spectronaut™.</p>
</div>
<div class="section level2">
<h2 id="code-example">code example<a class="anchor" aria-label="anchor" href="#code-example"></a>
</h2>
<div class="section level3">
<h3 id="all-in-one-function-example">all-in-one function example:<a class="anchor" aria-label="anchor" href="#all-in-one-function-example"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stemicha.github.io/SpectroPipeR/">SpectroPipeR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># use default parameters list</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>output_folder <span class="op">=</span> <span class="st">"../SpectroPipeR_test_folder"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example input file // or path to your Spectronaut report (*.tsv)</span></span>
<span><span class="va">example_file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"SN_test_HYE_mix_file.tsv"</span>, package<span class="op">=</span><span class="st">"SpectroPipeR"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># launch analysis</span></span>
<span><span class="va">SpectroPipeR_analysis</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/SpectroPipeR.html">SpectroPipeR</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">example_file_path</span>,</span>
<span>                                      parameter <span class="op">=</span> <span class="va">params</span>,</span>
<span>                                      condition_comparisons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HYE mix A"</span>,</span>
<span>                                                                      <span class="st">"HYE mix B"</span><span class="op">)</span><span class="op">)</span></span>
<span>                                      <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="single-function-execution-example">single function execution example:<a class="anchor" aria-label="anchor" href="#single-function-execution-example"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stemicha.github.io/SpectroPipeR/">SpectroPipeR</a></span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># use default parameters list</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>output_folder <span class="op">=</span> <span class="st">"../SpectroPipeR_test_folder"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example input file // or path to your Spectronaut report (*.tsv)</span></span>
<span><span class="va">example_file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span>
<span>                                 <span class="st">"SN_test_HYE_mix_file.tsv"</span>,</span>
<span>                                 package<span class="op">=</span><span class="st">"SpectroPipeR"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># step 1: load Spectronaut data module</span></span>
<span><span class="va">SpectroPipeR_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/read_spectronaut_module.html">read_spectronaut_module</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">example_file_path</span>,</span>
<span>                                             parameter <span class="op">=</span> <span class="va">params</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># step 2: normalize &amp; quantification module</span></span>
<span><span class="va">SpectroPipeR_data_quant</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/norm_quant_module.html">norm_quant_module</a></span><span class="op">(</span>SpectroPipeR_data <span class="op">=</span> <span class="va">SpectroPipeR_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># step 3: MVA module</span></span>
<span><span class="va">SpectroPipeR_MVA</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/MVA_module.html">MVA_module</a></span><span class="op">(</span>SpectroPipeR_data_quant <span class="op">=</span> <span class="va">SpectroPipeR_data_quant</span>,</span>
<span>           HCPC_analysis <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># step 4: statistics module</span></span>
<span><span class="va">SpectroPipeR_data_stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/statistics_module.html">statistics_module</a></span><span class="op">(</span>SpectroPipeR_data_quant <span class="op">=</span> <span class="va">SpectroPipeR_data_quant</span>,</span>
<span>                                       condition_comparisons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HYE mix A"</span>,</span>
<span>                                                                      <span class="st">"HYE mix B"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># step 5: report module</span></span>
<span><span class="fu"><a href="reference/SpectroPipeR_report_module.html">SpectroPipeR_report_module</a></span><span class="op">(</span>SpectroPipeR_data <span class="op">=</span> <span class="va">SpectroPipeR_data</span>,</span>
<span>                           SpectroPipeR_data_quant <span class="op">=</span> <span class="va">SpectroPipeR_data_quant</span>,</span>
<span>                           SpectroPipeR_data_stats <span class="op">=</span> <span class="va">SpectroPipeR_data_stats</span><span class="op">)</span></span></code></pre></div>
<p>If all the necessary packages are correctly installed, you can also execute SpectroPipeR analysis from the terminal using bash. Sometimes, extensive analyses require more computational power and memory, so it might be beneficial to run them on a server.</p>
<p>Here is a basic example that you can use as a starting point, which you can save as “SpectroPipeR_terminal.sh”</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co"># Command line arguments</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="va">input_file</span><span class="op">=</span><span class="va">$1</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="va">parameter</span><span class="op">=</span><span class="va">$2</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="va">condition_comparisons</span><span class="op">=</span><span class="va">$3</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co"># usage</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co"># bash SpectroPipeR_terminal.sh "SN_test_HYE_mix_file.tsv" "output_folder=SpectroPipeR_test_folder;stat_test=modt;ion_q_value_cutoff=0.001" "HYE mix A,HYE mix B;HYE mix B,HYE mix A"</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co"># R script</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">"</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="st">library(SpectroPipeR)</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="st">print(</span><span class="dt">\"</span><span class="va">$parameter</span><span class="dt">\"</span><span class="st">)</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="st">print(</span><span class="dt">\"</span><span class="va">$input_file</span><span class="dt">\"</span><span class="st">)</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="st">print(</span><span class="dt">\"</span><span class="va">$condition_comparisons</span><span class="dt">\"</span><span class="st">)</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="st"># split parameters</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="st">params &lt;- strsplit(</span><span class="dt">\"</span><span class="va">$parameter</span><span class="dt">\"</span><span class="st">,split = </span><span class="dt">\"</span><span class="st">;</span><span class="dt">\"</span><span class="st">)</span></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a><span class="st">params &lt;- strsplit(unlist(params),</span><span class="dt">\"</span><span class="st">=</span><span class="dt">\"</span><span class="st">)</span></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a><span class="st">names(params) &lt;- lapply(params, function(x) x[1])</span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a><span class="st">params &lt;- lapply(params, function(x) x[2])</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a><span class="st"># convert parameters class</span></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a><span class="st">convert_params &lt;- function(params) {</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a><span class="st">  numeric_params = c(</span><span class="dt">\"</span><span class="st">ion_q_value_cutoff</span><span class="dt">\"</span><span class="st">,</span></span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a><span class="st">                     </span><span class="dt">\"</span><span class="st">id_drop_cutoff</span><span class="dt">\"</span><span class="st">,</span></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a><span class="st">                     </span><span class="dt">\"</span><span class="st">normalization_factor_cutoff_outlier</span><span class="dt">\"</span><span class="st">,</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a><span class="st">                     </span><span class="dt">\"</span><span class="st">fold_change</span><span class="dt">\"</span><span class="st">,</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a><span class="st">                     </span><span class="dt">\"</span><span class="st">p_value_cutoff</span><span class="dt">\"</span><span class="st">)</span></span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a><span class="st">  logical_params = c(</span><span class="dt">\"</span><span class="st">filter_oxidized_peptides</span><span class="dt">\"</span><span class="st">,</span></span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a><span class="st">                     </span><span class="dt">\"</span><span class="st">paired</span><span class="dt">\"</span><span class="st">)</span></span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a><span class="st">  # iterate over each parameter</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a><span class="st">  for (param in names(params)) {</span></span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a><span class="st">    # check if parameter is in numeric_params</span></span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a><span class="st">    if (param %in% numeric_params) {</span></span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a><span class="st">      # convert to numeric</span></span>
<span id="cb6-41"><a href="#cb6-41" tabindex="-1"></a><span class="st">      params[[param]] &lt;- as.numeric(params[[param]])</span></span>
<span id="cb6-42"><a href="#cb6-42" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb6-43"><a href="#cb6-43" tabindex="-1"></a><span class="st">    # check if parameter is in logical_params</span></span>
<span id="cb6-44"><a href="#cb6-44" tabindex="-1"></a><span class="st">    else if (param %in% logical_params) {</span></span>
<span id="cb6-45"><a href="#cb6-45" tabindex="-1"></a><span class="st">      # convert to logical</span></span>
<span id="cb6-46"><a href="#cb6-46" tabindex="-1"></a><span class="st">      params[[param]] &lt;- as.logical(params[[param]])</span></span>
<span id="cb6-47"><a href="#cb6-47" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb6-48"><a href="#cb6-48" tabindex="-1"></a><span class="st">  }</span></span>
<span id="cb6-49"><a href="#cb6-49" tabindex="-1"></a><span class="st">  return(params)</span></span>
<span id="cb6-50"><a href="#cb6-50" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb6-51"><a href="#cb6-51" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" tabindex="-1"></a><span class="st">params &lt;- convert_params(params)</span></span>
<span id="cb6-53"><a href="#cb6-53" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" tabindex="-1"></a><span class="st"># split condition comparisons</span></span>
<span id="cb6-55"><a href="#cb6-55" tabindex="-1"></a><span class="st">cond_comp &lt;- strsplit(</span><span class="dt">\"</span><span class="va">$condition_comparisons</span><span class="dt">\"</span><span class="st">,split = </span><span class="dt">\"</span><span class="st">;</span><span class="dt">\"</span><span class="st">)</span></span>
<span id="cb6-56"><a href="#cb6-56" tabindex="-1"></a><span class="st">cond_comp &lt;- sapply(unlist(cond_comp), function(x) strsplit(x,split = </span><span class="dt">\"</span><span class="st">,</span><span class="dt">\"</span><span class="st">))</span></span>
<span id="cb6-57"><a href="#cb6-57" tabindex="-1"></a><span class="st">cond_comp &lt;- do.call(cbind,cond_comp)</span></span>
<span id="cb6-58"><a href="#cb6-58" tabindex="-1"></a></span>
<span id="cb6-59"><a href="#cb6-59" tabindex="-1"></a><span class="st">class(params)</span></span>
<span id="cb6-60"><a href="#cb6-60" tabindex="-1"></a><span class="st">print(params)</span></span>
<span id="cb6-61"><a href="#cb6-61" tabindex="-1"></a></span>
<span id="cb6-62"><a href="#cb6-62" tabindex="-1"></a><span class="st"># perform the analysis</span></span>
<span id="cb6-63"><a href="#cb6-63" tabindex="-1"></a><span class="st">SpectroPipeR_analysis &lt;- SpectroPipeR(file = </span><span class="dt">\"</span><span class="va">$input_file</span><span class="dt">\"</span><span class="st">,</span></span>
<span id="cb6-64"><a href="#cb6-64" tabindex="-1"></a><span class="st">                                     parameter = params,</span></span>
<span id="cb6-65"><a href="#cb6-65" tabindex="-1"></a><span class="st">                                     condition_comparisons = cond_comp</span></span>
<span id="cb6-66"><a href="#cb6-66" tabindex="-1"></a><span class="st">                                     )</span></span>
<span id="cb6-67"><a href="#cb6-67" tabindex="-1"></a><span class="st">"</span></span>
<span id="cb6-68"><a href="#cb6-68" tabindex="-1"></a></span></code></pre></div>
<p>example terminal usage:</p>
<p>bash SpectroPipeR_terminal.sh [input_file] [named parameters separated by ;] [condition comparisons separated by ;]</p>
<pre class="terminal"><code>bash SpectroPipeR_terminal.sh "SN_test_HYE_mix_file.tsv" "output_folder=SpectroPipeR_test_folder;stat_test=modt;ion_q_value_cutoff=0.001" "HYE mix A,HYE mix B;HYE mix B,HYE mix A"</code></pre>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing SpectroPipeR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Stephan Michalik <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6550-0132" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Stephan Michalik.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
